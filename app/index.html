<!DOCTYPE html>
<html>

<head>
    <script data-require="angular.js@*" data-semver="1.3.1" src="//code.angularjs.org/1.3.1/angular.js"></script>
    <link data-require="bootstrap-css@~3.1.1" data-semver="3.1.1" rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="style.css" />
    <script src="app.js"></script>
    <script type="text/javascript">
        /*
         TODO:
         Probably could/should create everything here dynamically, loop over an array of however many authors are available, instead of hard-coding everything three times.
        */
        const dataReceiver1 = function(response) {
            if(response) {
                window.data1 = response;
            }
        }
        const dataReceiver2 = function(response) {
            window.data2 = response;
        }
        const dataReceiver3 = function(response) {
            window.data3 = response;
        }
    </script>
</head>

<body>
    <div class="container" ng-app="tabApp">
        <div class="row" ng-controller="TabController">
            <div class="col-md-12">
                <ul class="nav nav-tabs">
                    <li ng-class="{ active: isSet(1) }">
                        <a href ng-click="setTab(1)">{{authors[0]}}</a>
                    </li>
                    <li ng-class="{ active: isSet(2) }">
                        <a href ng-click="setTab(2)">{{authors[1]}}</a>
                    </li>
                    <li ng-class="{ active: isSet(3) }">
                        <a href ng-click="setTab(3)">{{authors[2]}}</a>
                    </li>
                </ul>
            </div>
            <div class="col-md-12">
                <div class="jumbotron">
                    <div ng-show="isSet(1)">
                        <script src="https://itunes.apple.com/search?country=gb&term=hemingway&media=ebook&limit=10&callback=dataReceiver1"></script>
                        <div ng-repeat="result in data1.results">
                            <h3><a href={{result.trackViewUrl}} target="_blank">{{result.trackName}}</a></h3>
                            <div ng-bind-html="$sce.trustAsHtml(result.description)"></div>
                            <div>Price: <b>{{result.formattedPrice}}</b></div>
                        </div>
                    </div>
                    <div ng-show="isSet(2)">
                        <script src="https://itunes.apple.com/search?country=gb&term=dickens&media=ebook&limit=10&callback=dataReceiver2"></script>
                        <div ng-repeat="result in data2.results">
                            <h3><a href={{result.trackViewUrl}} target="_blank">{{result.trackName}}</a></h3>
                            <div ng-bind-html="$sce.trustAsHtml(result.description)"></div>
                            <div>Price: <b>{{result.formattedPrice}}</b></div>
                        </div>
                    </div>
                    <div ng-show="isSet(3)">
                        <script src="https://itunes.apple.com/search?country=gb&term=shakespeare&media=ebook&limit=10&callback=dataReceiver3"></script>
                        <div ng-repeat="result in data3.results">
                            <h3><a href={{result.trackViewUrl}} target="_blank">{{result.trackName}}</a></h3>
                            <div ng-bind-html="$sce.trustAsHtml(result.description)"></div>
                            <div>Price: <b>{{result.formattedPrice}}</b></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</body>

</html>